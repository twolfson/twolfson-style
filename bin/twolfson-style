#!/usr/bin/env node
// Load in our dependencies
var program = require('commander');
var pkg = require('../package.json');
var twolfsonStyle = require('../');

// Define our CLI
program.version(pkg.version);
program.name = 'twolfson-style';

// Define CLI commands
program
  .command('install [dir]')
  .description('Install style `rc` configuration files to `dir` or the current directory')
  .action(function install (dir) {
    // Fallback directory to cwd
    dir = dir || process.cwd();

    // Install to the directory
    // DEV: An exit will occur automatically
    twolfsonStyle.installSync(dir);
  });

program
  .command('precheck <path...>')
  .description('Run critical style checks (e.g. using an undefined variable)')
  .action(function prechceck (pathArr) {
    twolfsonStyle.precheck(pathArr, {
      stderr: process.stderr
    }, function handleEnd (err) {
      // If there was an error, throw it
      if (err) {
        throw err;
      }
    });
  });

// Process the arguments
program.parse(process.argv);
